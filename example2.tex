% ----------------------------------------------------------------------
\begin{frame}<0-10,30->[label=examplelong]{Example}

$
P
=
\left\{
    \{ a \} \leftarrow, \ \
    b \leftarrow a, \ \
    \{ c \} \leftarrow \naf{a}, \ \
    d \leftarrow \naf{b}, \naf{c}, \ \
    \phantom{d} \leftarrow c, \naf{a}
\right\}
$

\bigskip
\begin{center}
\begin{tikzpicture}
[
  examples
  , x=1cm
  , y=-1cm
  , every node/.style={node distance=1cm and 1cm, on grid}
  , rule_dep/.style={align=center, draw}
  , rule_arrow/.style={<-}
  , rule_arrow_neg/.style={rule_arrow, dashed}
]

%\draw [help lines] (0,0) grid (-5,5);

\uncover<2->{

%
% rule sequence
%
\alert<4,32>{\node[rule] (rule_seq_1) at (4.25,1) {\alt<10,38>{\scode \{a\}.\phantom{b :-}}{$\{a\} \leftarrow$}};}
\alt<30->{
\alert<33>{\node[rule, below=of rule_seq_1] (rule_seq_2) 
  {\alt<38>{\scode \phantom{xxxxx}\{c\} :- not a.}{$\{c\} \leftarrow \naf{a}$}};}
\alert<34>{\node[rule, below=of rule_seq_2] (rule_seq_3) 
  {\alt<38>{\scode \phantom{xxxxx}:- c, not a.}{$\phantom{d} \leftarrow c, \naf{a}$}};}
\alert<35>{\node[rule, below=of rule_seq_3] (rule_seq_4) 
  {\alt<38>{\scode b :- a.}{$b \leftarrow a$}};}
\alert<36>{\node[rule, below=of rule_seq_4] (rule_seq_5) 
  {\alt<38>{\scode \phantom{xxxxxxxxxxx}d :- not b, not c.}{$d \leftarrow \naf{b}, \naf{c}$}};}
}{
\alert<5>{\node[rule, below=of rule_seq_1] (rule_seq_2) 
  {\alt<10>{\scode b :- a.}{$b \leftarrow a$}};}
\alert<6>{\node[rule, below=of rule_seq_2] (rule_seq_3) 
  {\alt<10>{\scode \phantom{xxxxx}\{c\} :- not a.}{$\{c\} \leftarrow \naf{a}$}};}
\alert<7>{\node[rule, below=of rule_seq_3] (rule_seq_4) 
  {\alt<10>{\scode \phantom{xxxxxxxxxxx}d :- not b, not c.}{$d \leftarrow \naf{b}, \naf{c}$}};}
\alert<8>{\node[rule, below=of rule_seq_4] (rule_seq_5) 
  {\alt<10>{\scode \phantom{xxxxx}:- c, not a.}{$\phantom{d} \leftarrow c, \naf{a}$}};}
}
 
\visible<10>{
 \draw[on grid] ($ (rule_seq_1.north west) + (-2mm,-0.1) $) rectangle ($ (rule_seq_5.south east) + (12mm,0.1) $);
 \node[on grid] at ($ (rule_seq_1.north) + (8mm,4.5mm) $) {\texttt{example.lp}};
}
\visible<38>{
 \draw[on grid] ($ (rule_seq_1.north west) + (-2mm,-0.1) $) rectangle ($ (rule_seq_5.south east) + (2mm,0.1) $);
 \node[on grid] at ($ (rule_seq_1.north) + (8mm,4.5mm) $) {\texttt{example.lp}};
}

%
% smodels
%

% line 0
\uncover<3-10,31->{\alert<3,11>{\node[smodel] (node01)  at ( 1, 0) {};}}

% line 1
\uncover<4-10,32->{\alert<4,32>{
\node[smodel, below left=of node01] (node11) {}
  edge [arrow] (node01);
\node[smodel, below right=of node01] (node12) {$a$}
  edge [arrow] (node01);
}}

\alt<30->{

% line 2
\uncover<33->{\alert<33>{
\node[smodel, below left=of node11, xshift=4mm] (node21) {}
  edge [arrow] (node11);
\node[smodel, below right=of node11, xshift=-4mm] (node22) {$c$}
  edge [arrow] (node11);
\node[smodel, below=of node12] (node23) {$a$}
  edge [arrow] (node12);
}}

% line 3
\uncover<34->{\alert<34>{
\node[smodel, below=of node21] (node31) {}
  edge [arrow] (node21);
\node[smodel, below=of node23] (node32) {$a$}
  edge [arrow] (node23);
}}

% line 4
\uncover<35->{\alert<35>{
\node[smodel, below=of node31] (node41) {}
  edge [arrow] (node31);
\node[smodel, below=of node32] (node42) {$a$ $b$}
  edge [arrow] (node32);
}}

% line 5
\uncover<36->{\alert<36>{
\node[smodel, below=of node41] (node51) {$d$}
  edge [arrow] (node41);
\node[smodel, below=of node42] (node52) {$a$ $b$}
  edge [arrow] (node42);
}}

\uncover<37->{
\node[any, below=of node41, xshift=5mm, yshift=-3mm] (ok1) {\OK};
\node[any, below=of node42, xshift=6.75mm, yshift=-3mm] (ok2) {\OK};
}

}{
% line 2
\uncover<5->{\alert<5>{
\node[smodel, below=of node11] (node21) {}
  edge [arrow] (node11);
\node[smodel, below=of node12] (node22) {$a$ $b$}
  edge [arrow] (node12);
}}

% line 3
\uncover<6->{\alert<6>{
\node[smodel, below left=of node21, xshift=4mm] (node31) {}
  edge [arrow] (node21);
\node[smodel, below right=of node21, xshift=-4mm] (node32) {$c$}
  edge [arrow] (node21);
\node[smodel, below=of node22] (node33) {$a$ $b$}
  edge [arrow] (node22);
}}

% line 4
\uncover<7->{\alert<7>{
\node[smodel, below=of node31] (node41) {$d$}
  edge [arrow] (node31);
\node[smodel, below=of node32] (node42) {$c$}
  edge [arrow] (node32);
\node[smodel, below=of node33] (node43) {$a$ $b$}
  edge [arrow] (node33);
}}

% line 5
\uncover<8->{\alert<8>{
\node[smodel, below=of node41] (node51) {$d$}
  edge [arrow] (node41);
%\node[smodel] (node42) at ( 1,4) {$c$}
%  edge [arrow] (node32);
\node[smodel, below=of node43] (node53) {$a$ $b$}
  edge [arrow] (node43);
}}

\uncover<9->{
\node[any, below=of node41, xshift=5mm, yshift=-3mm] (ok1) {\OK};
\node[any, below=of node43, xshift=6.75mm, yshift=-3mm] (ok2) {\OK};
}

} % alt<...>
} % uncover<2>
\end{tikzpicture}
\end{center}

\end{frame}
