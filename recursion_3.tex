
\begin{columns}
\begin{column}{0.02\textwidth}\end{column}
\begin{column}{0.16\textwidth}
\texttt{%
        {\{}a{\}}.             \newline
        {\{}b{\}}:- a.         \newline
\phantom{\{}c\phantom{\}}:- b. \newline
\phantom{\{}d\phantom{\}}:- c. \newline
        {\{}e{\}}:- d.      \newline
\phantom{\{}f\phantom{\}}:- e. \newline
\phantom{\{}g\phantom{\}}:- f. \newline
\phantom{\{}a\phantom{\}}:- g.
}
\end{column}
\begin{column}{0.57\textwidth}
\vspace{-1cm}
\begin{center}
\begin{tikzpicture}
[
  examples,
  x=1cm,
  y=-1cm,
  every node/.style={node distance=1.2cm and 1cm, on grid},
  small/.style={inner sep=0.5mm},
  rule_dep/.style={align=center, draw},
  rule_arrow/.style={<-},
  cycle_arrow/.style={rule_arrow, dotted, thick, shorten <= 0.5mm, shorten >= 0.5mm},
  rule_arrow_neg/.style={rule_arrow, dashed},
  %smallfontsize/.style={font={\scriptsize\ttfamily}},
  smallfontsize/.style={font={\footnotesize\ttfamily}},
  movedown/.style={yshift=-2mm},
]


%
% smodel
%

% line 0
%\uncover<2->{\alert<2>{
\node[smodel] (node01)  at ( 0, 0) {};
%}}


%
% correct models
%

% line 1
\node[smodel, below left=of  node01] (node11) {}    edge [arrow] (node01);
\node[smodel, below right=of node01] (node12) {a} edge [arrow] (node01);

% line 2
\visible<2->{\alert<2>{
\node[smodel, below=of  node11]                         (node21) {}        edge [cycle_arrow] (node11);
\node[smodel, below left=of  node12, small, xshift=0mm] (node22) {a}     edge [cycle_arrow] (node12);
\alt<2>{
  \node[smodel, below right=of node12, small, xshift=-2mm] (node23) {a\myspace{}b} edge [cycle_arrow] (node12);
}{\alert<3-4>{
  \node[smodel, below right=of node12, small, xshift=-2mm, align=left, smallfontsize] (node23) 
    {\alt<3>{a\myspace{}b\\[-1mm]c\myspace{}\phantom{d}}
            {a\myspace{}b\\[-1mm]c\myspace{}d}}
    edge [cycle_arrow] (node12);
}}
}} % \alert<2> \visible<2->

% line 3
\visible<5->{\alert<5>{
%
\uncover<5-13>{
  \node[smodel, below=of  node21, movedown]                         (node31) {}            edge [cycle_arrow] (node21);
  \node[smodel, below=of  node22, small, movedown]                  (node32) {a}         edge [cycle_arrow] (node22);
}
%
\alert<6-7>{\only<5-7>{
\node[smodel, below right=of  node22, xshift=-2mm, small, align=left, movedown, smallfontsize] (node33x) 
  {a\myspace{}b\\[-1mm]\alt<5>{\phantom{c}}{c}\myspace{}\alt<5-6>{\phantom{d}}{d}}
  edge [cycle_arrow] (node22);
}}
%
\uncover<5-13>{
\only<8->{\alert<8>{
  \draw[cycle_arrow,->] (node22) -- (node33);
}}
%
\alert<8>{
  \node[smodel, below=of node23, xshift=0mm, small, align=left, movedown, smallfontsize] (node33) {a\myspace{}b\\[-1mm]c\myspace{}d}     edge [cycle_arrow] (node23);
}
} % uncover
%
\alert<6-7>{
\node[smodel, below right=of node23, xshift=20mm, small, align=left, movedown, smallfontsize] (node34) 
  {a\myspace{}b\myspace{}e\myspace{}\alt<5>{\phantom{f}}{f}\\[-1mm]c\myspace{}d\myspace{}\alt<5-6>{\phantom{g}}{g}}
  edge [cycle_arrow] (node23);
}
}}

% line 4
\visible<9-14>{\uncover<9-13>{\alert<9>{
\node[smodel, below=of node31, movedown]        (node41) {}            edge [cycle_arrow] (node31);
\node[smodel, below=of node32, small, movedown] (node42) {a}         edge [cycle_arrow] (node32);
%
\only<9-11>{\alert<10-11>{
  \node[smodel, below right=of  node32, small, align=left, movedown, smallfontsize, xshift=-2mm] (node43)
    {a\myspace{}b\\[-1mm]\alt<9>{\phantom{c}}{c}\myspace{}\alt<9-10>{\phantom{d}}{d}}
    edge [cycle_arrow] (node32);
}}
%
\alert<12>{
\node[smodel, below=of  node33, small, align=left, movedown, smallfontsize] (node44) {a\myspace{}b\\[-1mm]c\myspace{}d}     edge [cycle_arrow] (node33);
}
%
\only<9-11>{\alert<10-11>{
  \node[smodel, below right=of node33, small, align=left, movedown, smallfontsize, xshift=3mm] (node45) 
    {a\myspace{}b\myspace{}e\myspace{}\alt<9>{\phantom{f}}{f}\\[-1mm]c\myspace{}d\myspace{}\alt<9-10>{\phantom{g}}{g}}
    edge [cycle_arrow] (node33);
}}
%
\alert<12>{
\node[smodel, below=of node34, small, align=left, movedown, smallfontsize] (node46) {a\myspace{}b\myspace{}e\myspace{}f\\[-1mm]c\myspace{}d\myspace{}g} edge [cycle_arrow] (node34);
}
%
\only<12->{\alert<12>{\draw[cycle_arrow,->] (node32) -- (node44);}}
\only<12->{\alert<12>{\draw[cycle_arrow,->] (node33) -- (node46);}}
}}}


%
% OKs
%
\visible<13>{
\node[any] (ok1) at ($ (node41.south east) + (2mm,-1mm) $) {\OK};
\node[any] (ok2) at ($ (node42.south east) + (1.5mm,-1mm) $) {\OK};
\node[any] (ok3) at ($ (node44.south east) + (2.5mm,-1mm) $) {\OK};
\node[any] (ok4) at ($ (node46.south east) + (3mm,-1mm) $) {\OK};
}
%
\visible<14>{
\node[any] (ok1) at ($ (node21.south east) + (2mm,-1mm) $) {\OK};
\node[any] (ok2) at ($ (node22.south east) + (1.5mm,-1mm) $) {\OK};
\node[any] (ok3) at ($ (node23.south east) + (2.5mm,-1mm) $) {\OK};
\node[any] (ok4) at ($ (node34.south east) + (3mm,-1mm) $) {\OK};
}



%
% rule sequence
%

\node[rule, right=of node12, xshift=5cm] (rule_seq_1) {\scode \{a\}.\hspace{9mm}};
%\only<9->\node[rule, right=of node12, xshift=4.3cm] (rule_seq_1) {\scode \{a\}.\hspace{9mm}};

\alert<2,5,9>{\node[rule, below=of rule_seq_1] (rule_seq_2) {\scode \hspace{2.5mm}{\{}b{\}} :- a.};}
%\node[rule, below=of rule_seq_1]             (rule_seq_2) {\scode \{b\} :- a.};
\alert<3,6,10>{\node[rule, below=of rule_seq_2, yshift=7mm] (rule_seq_3) {\scode \hspace{2.5mm}\phantom{\{}c\phantom{\}} :- b.};}
\alert<4,7,11>{\node[rule, below=of rule_seq_3, yshift=7mm] (rule_seq_4) {\scode \hspace{2.5mm}\phantom{\{}d\phantom{\}} :- c.};}
\alert<5,9>{
\node[rule, below=of rule_seq_4, yshift=7mm] (rule_seq_5) {\scode \hspace{2.5mm}\{e\} :- d.};
}
\alert<6,10>{\node[rule, below=of rule_seq_5, yshift=7mm] (rule_seq_6) {\scode \hspace{2.5mm}\phantom{\{}f\phantom{\}} :- e.};}
\alert<7,11>{\node[rule, below=of rule_seq_6, yshift=7mm] (rule_seq_7) {\scode \hspace{2.5mm}\phantom{\{}g\phantom{\}} :- f.};}
\node[rule, below=of rule_seq_7, yshift=7mm] (rule_seq_8) {\scode \hspace{2.5mm}\phantom{\{}a\phantom{\}} :- g.};

{\alert<1>{
\draw[very thick, dotted, rounded corners] 
  ($ (rule_seq_2.north west) + (1.3mm,1mm) $) rectangle ($ (rule_seq_8.south east) + (1mm,-1mm) $);
}}


\end{tikzpicture}
\end{center}
\end{column}
\begin{column}{0.25\textwidth}\end{column}
\end{columns}

