
% ----------------------------------------------------------------------
\section{Examples}
% ----------------------------------------------------------------------

% ----------------------------------------------------------------------
\begin{frame}{Example}

$
P
=
\left\{
    \only<1>{\{ p \} \leftarrow,}\only<2->{q \leftarrow p,} \
    \only<1>{q \leftarrow p,}\only<2>{\{ p \} \leftarrow,}\only<3->{\phantom{q} \leftarrow \naf{q},} \
    \only<1-2>{\phantom{q} \leftarrow \naf{q}}\only<3->{\{ p \} \leftarrow} 
\right\}
$
\bigskip
\begin{center}
\begin{tikzpicture}
[
  examples
]

% line 0
\uncover<4->{
\alert<4>{
\node[smodel] (node01)  at ( 1, 0) {};
}
}

% line 1

\uncover<5->{
\alert<5>{
\node[smodel] (node11) at ( 0,1) {}
  edge [arrow] (node01);

\node[smodel] (node12) at ( 2,1) {$p$}
  edge [arrow] (node01);
}
}

\only<1-7>{
\alert<5>{
\node[rule] at (3.5,1) {$\{p\} \leftarrow$};
}
}
\node[rule_dep] (rule1) at (5.5,1) {$\{p\} \leftarrow$};
\visible<8>{
\draw (2.75,0.75) node[anchor=south west,align=right] {\texttt{example.lp}} rectangle (4.25,3.25) ;

\node[clingo_rule] at (3.5,1) {\{p\}.};
}
% line 2

\uncover<6->{
\alert<6>{
\node[smodel] (node21) at ( 0,2) {}
  edge [arrow] (node11);

\node[smodel] (node22) at ( 2,2) {$p$ $q$}
  edge [arrow] (node12);
}
}

\only<1-7>{
\alert<6>{
\node[rule] at (3.5,2) {$q \leftarrow p$};
}
}

\node[rule_dep] (rule2) at (5.5,2) {$q \leftarrow p$}
  edge [rule_arrow] (rule1);
\only<8>{
\node[clingo_rule] at (3.5,2) {q :- p.};
}

% line 3

%\node[empty] (node31) at ( 0,3) {\emptysmodel}
%  edge [empty_arrow] (node21);

\uncover<7->{
\alert<7>{
\node[smodel] (node32) at ( 2,3) {$p$ $q$}
  edge [arrow] (node22);
}
}

\only<1-7>{
\alert<7>{
\node[rule] at (3.5,3) {$\phantom{q} \leftarrow \naf{q}$};
}
}
\node[rule_dep] (rule3) at (5.5,3) {$\phantom{q} \leftarrow \naf{q}$}
  edge [rule_arrow_neg] (rule2);
\only<8>{
\node[clingo_rule] at (3.5,3) {:- not q.};
}

%\draw [help lines] (0,0) grid (5,5);
\end{tikzpicture}
\end{center}

\end{frame}

% ----------------------------------------------------------------------
\begin{frame}[label=examplelong]{Example}

$
P
=
\left\{
    \{ p \} \leftarrow, \ \
    q \leftarrow p, \ \
    \{ r \} \leftarrow \naf{p}, \ \
    s \leftarrow \naf{q}, \naf{r}, \ \
    \phantom{s} \leftarrow r, \naf{p}
\right\}
$

\bigskip
\begin{center}
\begin{tikzpicture}
[
  examples
  , x=1cm
  , y=-1cm
  , every node/.style={node distance=1cm and 1cm, on grid}
  , rule_dep/.style={align=center, draw}
  , rule_arrow/.style={<-}
  , rule_arrow_neg/.style={rule_arrow, dashed}
]

%
% dependency graph
%
\node[rule_dep] (rule1) at (8.5,1.5) {$\{p\} \leftarrow$};
\node[rule_dep, below left=of rule1, xshift=-1.5mm] (rule21) {$q \leftarrow p$}
  edge [rule_arrow] (rule1);
\node[rule_dep, below right=of rule1, xshift=1.5mm] (rule22) {$\{r\} \leftarrow \naf{p}$}
  edge [rule_arrow_neg] (rule1);
\node[rule_dep, below=of rule21] (rule31) {$s \leftarrow \naf{q}, \naf{r}$}
  edge [rule_arrow_neg] (rule21);
\draw [rule_arrow_neg, shorten <= 0.1mm] (rule31.north east) -- (rule22.south);
\node[rule_dep, below=of rule22] (rule32) {$\phantom{s} \leftarrow r, \naf{p}$}
  edge [rule_arrow] (rule22);
\draw [rule_arrow_neg, ->, rounded corners] (rule1.east) -- ++ (1.85,0) -- ++ (0,2) -- (rule32.east);

%\draw [help lines] (0,0) grid (-5,5);


%
% rule sequence
%
\node[rule] (rule_seq_1) at (4.25,1) {$\{p\} \leftarrow$};
\alt<7->{
\node[rule, below=of rule_seq_1] (rule_seq_2) {$\{r\} \leftarrow \naf{p}$};
\node[rule, below=of rule_seq_2] (rule_seq_3) {$\phantom{s} \leftarrow r, \naf{p}$};
\node[rule, below=of rule_seq_3] (rule_seq_4) {$q \leftarrow p$};
\node[rule, below=of rule_seq_4] (rule_seq_5) {$s \leftarrow \naf{q}, \naf{r}$};
}{
\node[rule, below=of rule_seq_1] (rule_seq_2) {$q \leftarrow p$};
\node[rule, below=of rule_seq_2] (rule_seq_3) {$\{r\} \leftarrow \naf{p}$};
\node[rule, below=of rule_seq_3] (rule_seq_4) {$s \leftarrow \naf{q}, \naf{r}$};
\node[rule, below=of rule_seq_4] (rule_seq_5) {$\phantom{s} \leftarrow r, \naf{p}$};
}
%
% smodels
%

% line 0
\node[smodel] (node01)  at ( 1, 0) {};

% line 1
\uncover<2-6,8->{
\node[smodel, below left=of node01] (node11) {}
  edge [arrow] (node01);
\node[smodel, below right=of node01] (node12) {$p$}
  edge [arrow] (node01);
}

\alt<7->{

% line 2
\uncover<9->{
\node[smodel, below left=of node11, xshift=4mm] (node21) {}
  edge [arrow] (node11);
\node[smodel, below right=of node11, xshift=-4mm] (node22) {$r$}
  edge [arrow] (node11);
\node[smodel, below=of node12] (node23) {$p$}
  edge [arrow] (node12);
}

% line 3
\uncover<10->{
\node[smodel, below=of node21] (node31) {}
  edge [arrow] (node21);
\node[smodel, below=of node23] (node32) {$p$}
  edge [arrow] (node23);
}

% line 4
\uncover<11->{
\node[smodel, below=of node31] (node41) {}
  edge [arrow] (node31);
\node[smodel, below=of node32] (node42) {$p$ $q$}
  edge [arrow] (node32);
}

% line 5
\uncover<12->{
\node[smodel, below=of node41] (node51) {$s$}
  edge [arrow] (node41);
\node[smodel, below=of node42] (node52) {$p$ $q$}
  edge [arrow] (node42);
}

}{
% line 2
\uncover<3->{
\node[smodel, below=of node11] (node21) {}
  edge [arrow] (node11);
\node[smodel, below=of node12] (node22) {$p$ $q$}
  edge [arrow] (node12);
}

% line 3
\uncover<4->{
\node[smodel, below left=of node21, xshift=4mm] (node31) {}
  edge [arrow] (node21);
\node[smodel, below right=of node21, xshift=-4mm] (node32) {$r$}
  edge [arrow] (node21);
\node[smodel, below=of node22] (node33) {$p$ $q$}
  edge [arrow] (node22);
}

% line 4
\uncover<5->{
\node[smodel, below=of node31] (node41) {$s$}
  edge [arrow] (node31);
\node[smodel, below=of node32] (node42) {$r$}
  edge [arrow] (node32);
\node[smodel, below=of node33] (node43) {$p$ $q$}
  edge [arrow] (node33);
}

% line 5
\uncover<6->{
\node[smodel, below=of node41] (node51) {$s$}
  edge [arrow] (node41);
%\node[smodel] (node42) at ( 1,4) {$r$}
%  edge [arrow] (node32);
\node[smodel, below=of node43] (node53) {$p$ $q$}
  edge [arrow] (node43);
}
}

\end{tikzpicture}
\end{center}

\end{frame}

% ----------------------------------------------------------------------
%\input{recursion_hard}
\myinput{ezasp/recursion}
